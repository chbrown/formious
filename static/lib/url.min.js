var Url=function(){var c=function(a){this.path=this.port=this.hostname=this.protocol=null;this.query={};this.hash=null;this.merge(a)};c.parse=function(a){var b=document.createElement("a");b.href=a;a=new c;a.protocol=b.protocol.replace(/:+$/,"");a.hostname=b.hostname;a.port=b.port;a.path=b.pathname;a.query=c.parseQuerystring(b.search);a.hash=""===b.hash?null:b.hash.slice(1);return a};c.parseQuerystring=function(a){var b={};if(void 0===a||null===a||""===a)return b;a.slice(1).split("&").forEach(function(a){a=
a.split("=");var d=a[1];b[a[0]]=void 0===d?null:decodeURIComponent(d)});return b};c.formatQuerystring=function(a){var b=[],c;for(c in a){var d=a[c];if(null===d)b.push(c);else if(Array.isArray(d))for(var e=0,f=d.length;e<f;e++)b.push(c+"="+encodeURIComponent(d[e]));else b.push(c+"="+encodeURIComponent(d))}return 0<b.length?"?"+b.join("&"):""};c.prototype.merge=function(a){if(void 0===a||null===a)return this;for(var b=["protocol","hostname","port","hash"],c=0,d;void 0!==(d=b[c]);c++){var e=a[d];void 0!==
e&&(this[d]=e)}void 0!==a.path&&(this.path=null===a.path||"/"===a.path[0]?a.path:(this.path||"")+a.path);for(var f in a.query)b=a.query[f],void 0!==b&&(this.query[f]=b);return this};c.prototype.toString=function(){var a="";null!==this.protocol&&(a+=this.protocol+":");null!==this.hostname&&(a+="//"+this.hostname);null!==this.port&&""!==this.port&&(a+=":"+this.port);null!==this.path&&(a+=this.path);null!==this.query&&(a+=c.formatQuerystring(this.query));null!==this.hash&&(a+="#"+this.hash);return a};
return c}();
