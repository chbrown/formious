angular.module("misc-js/angular-plugins",[]).filter("trustHtml",["$sce",function(d){return function(b){return d.trustAsHtml(b)}}]).filter("trustResourceUrl",["$sce",function(d){return function(b){return d.trustAsResourceUrl(b)}}]).directive("help",function(){return{restrict:"C",template:'<span class="summary" style="opacity: 0.5" ng-hide="expanded" ng-click="expanded = true"></span><span class="full" ng-show="expanded" ng-click="expanded = false" ng-transclude></span>',transclude:!0,scope:{},link:function(d,
b,a){a=b.children().eq(0);b=b.children().eq(1);d.expanded=!1;d=b.text().trim();d=d.slice(0,50)+(50<d.length?"...":"");a.text(d)}}}).directive("fixedflow",function(){return{restrict:"A",link:function(d,b,a){b.css("position","fixed");d=getComputedStyle(b[0]).height;a=angular.element("<div>");a.css("height",d);a.addClass("fixedflow-placeholder");b.after(a)}}}).directive("activateCurrentAnchor",["$window","$rootScope",function(d,b){return{scope:{activateCurrentAnchor:"@"},link:function(a,c,e){var f=a.activateCurrentAnchor||
"current",h=function(c){a.current_anchor&&a.current_anchor.classList.remove(f);c.classList.add(f);a.current_anchor=c};e=function(){var a=d.location.pathname,b=c.find("a"),e,f;for(e=0;f=b[e];e++)if(a==f.pathname)return h(f);for(e=0;f=b[e];e++)if(0===a.indexOf(f.pathname))return h(f)};b.$on("$locationChangeSuccess",e);e()}}}]).directive("jsonTransform",function(){return{restrict:"A",require:"ngModel",link:function(d,b,a,c){b.on("blur keyup change",function(){d.$apply(function(){c.$setViewValue(b.val())})});
c.$render=function(){b.val(c.$viewValue);b[0].dispatchEvent(new Event("input"))};c.$formatters.push(function(a){return null===a?"":angular.toJson(a,!0)});c.$parsers.push(function(a){""===a&&(a=null);try{return c.$setValidity("json",!0),angular.fromJson(a)}catch(b){c.$setValidity("json",!1)}})}}}).directive("enhance",function(){return{restrict:"A",require:"?ngModel",scope:{},link:function(d,b,a,c){var e=b[0];"textarea"==e.tagName.toLowerCase()&&(window.Textarea?window.Textarea.enhance(e):console.error("Cannot enhance <textarea> without first loading textarea.js",
e));c&&(c.$render=function(){e.value=void 0===c.$viewValue||null===c.$viewValue?"":c.$viewValue;setTimeout(function(){e.dispatchEvent(new Event("input"))},0)},b.on("blur keyup change",function(){d.$apply(function(){c.$setViewValue(e.value)})}))}}}).directive("throbber",function(){return{restrict:"E",template:'<img src="/static/lib/img/throbber-24.gif">'}}).directive("score",function(){return{restrict:"A",scope:{score:"="},link:function(d,b,a){b.addClass("score");a=d.score;var c={};0>d.score?(a=0,
c.borderLeft="1px dotted rgba(0, 0, 0, 0.2)"):100<d.score&&(a=100,c.borderRight="1px dotted black");c.width=a+"%";c.backgroundColor="hsl("+(1.2*a).toFixed(2)+", 100%, 50%)";b.css(c)}}}).directive("ajaxform",["$http",function(d){return{restrict:"E",replace:!0,template:'<form ng-submit="submit($event)" ng-transclude></form>',transclude:!0,link:function(b,a,c){b.submit=function(a){"POST"!=c.method&&"GET"!=c.method&&(a.preventDefault(),d({method:c.method,url:c.action}).then(function(a){},function(){}))}}}}]).directive("checkboxSequence",
["$http",function(d){return{restrict:"A",link:function(b,a,c){var d=null,f=null;a.on("click",'input[type="checkbox"]',function(c){var b=c.target.checked;if(c.shiftKey&&b===f&&d)for(var n=a.find('input[type="checkbox"]'),k=!1,l=0,p=n.length;l<p;l++){var g=n[l];if(g==d||g==c.target)if(!1===k)k=!0;else break;else k&&(g.checked=b,angular.element(g).triggerHandler("click"))}d=c.target;f=b})}}}]).directive("mapObject",function(){return{restrict:"A",template:'<table class="map">  <tr ng-repeat="(key, val) in mapObject">    <td ng-bind="key"></td><td ng-bind="val"></td>  </tr></table>',
replace:!0,scope:{mapObject:"="}}}).directive("onUpload",["$parse",function(d){return{restrict:"A",compile:function(b,a){var c=d(a.onUpload);return function(d,f,h){b.on("change",function(b){d.$apply(function(){var f={$event:b};a.multiple?f.$files=b.target.files:f.$file=b.target.files[0];c(d,f)})})}}}}]).service("$flash",["$rootScope",function(d){return function(b,a){void 0===a&&(a=3E3);d.$broadcast("flash",b,a)}}]).directive("flash",["$timeout","$q",function(d,b){return{restrict:"E",template:'<div class="flash" ng-show="messages.length > 0"><span ng-repeat="message in messages track by $index" ng-bind="message"></span></div>',
replace:!0,scope:{messages:"&"},link:function(a,c,e){a.messages=[];a.add=function(b){a.messages.push(b)};a.remove=function(b){b=a.messages.indexOf(b);a.messages.splice(b,1)};a.$on("flash",function(c,e,m){a.add("...");c=function(b){a.remove("...");a.add(b);m&&d(function(){a.remove(b)},m)};b.when(e).then(c,c)})}}}]).factory("$laghttp",["$q","$http",function(d,b){return function(a){var c=d.defer();setTimeout(function(){b(a).then(c.resolve.bind(c),c.reject.bind(c))},250);return c.promise}}]).factory("$httpqueue",
["$q","$http",function(d,b){var a=d.defer(),c=a.promise;a.resolve();return function(a){return c=c.then(function(){return b(a)})}}]);
