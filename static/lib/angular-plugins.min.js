angular.module("misc-js/angular-plugins",[]).filter("trust",["$sce",function(d){return function(c){return d.trustAsHtml(c)}}]).directive("help",function(){return{restrict:"C",template:'<span class="summary" style="opacity: 0.5" ng-hide="expanded" ng-click="expanded = true"></span><span class="full" ng-show="expanded" ng-click="expanded = false" ng-transclude></span>',transclude:!0,scope:{},link:function(d,c,a){a=c.children().eq(0);c=c.children().eq(1);d.expanded=!1;d=c.text().trim();d=d.slice(0,50)+
(50<d.length?"...":"");a.text(d)}}}).directive("fixedflow",function(){return{restrict:"A",link:function(d,c,a){c.css("position","fixed");d=getComputedStyle(c[0]).height;a=angular.element("<div>");a.css("height",d);a.addClass("fixedflow-placeholder");c.after(a)}}}).directive("activateCurrentAnchor",["$window","$rootScope",function(d,c){return{scope:{activateCurrentAnchor:"@"},link:function(a,b,e){var f=a.activateCurrentAnchor||"current",m=function(b){a.current_anchor&&a.current_anchor.classList.remove(f);
b.classList.add(f);a.current_anchor=b};e=function(){var a=d.location.pathname,c=b.find("a"),e,f;for(e=0;f=c[e];e++)if(a==f.pathname)return m(f);for(e=0;f=c[e];e++)if(0===a.indexOf(f.pathname))return m(f)};c.$on("$locationChangeSuccess",e);e()}}}]).directive("jsonTransform",function(){return{restrict:"A",require:"ngModel",link:function(d,c,a,b){c.on("blur keyup change",function(){d.$apply(function(){b.$setViewValue(c.val())})});b.$render=function(){c.val(b.$viewValue);c[0].dispatchEvent(new Event("input"))};
b.$formatters.push(function(a){return null===a?"":angular.toJson(a,!0)});b.$parsers.push(function(a){""===a&&(a=null);try{return b.$setValidity("json",!0),angular.fromJson(a)}catch(c){b.$setValidity("json",!1)}})}}}).directive("enhance",function(){return{restrict:"A",require:"?ngModel",scope:{},link:function(d,c,a,b){var e=c[0];"textarea"==e.tagName.toLowerCase()&&(window.Textarea?window.Textarea.enhance(e):console.error("Cannot enhance <textarea> without first loading textarea.js",e));b&&(b.$render=
function(){e.value=void 0===b.$viewValue||null===b.$viewValue?"":b.$viewValue;setTimeout(function(){e.dispatchEvent(new Event("input"))},0)},c.on("blur keyup change",function(){d.$apply(function(){b.$setViewValue(e.value)})}))}}}).directive("throbber",function(){return{restrict:"E",template:'<img src="/static/lib/img/throbber-24.gif">'}}).directive("score",function(){return{restrict:"A",scope:{score:"="},link:function(d,c,a){c.addClass("score");a=d.score;var b={};0>d.score?(a=0,b.borderLeft="1px dotted rgba(0, 0, 0, 0.2)"):
100<d.score&&(a=100,b.borderRight="1px dotted black");b.width=a+"%";b.backgroundColor="hsl("+(1.2*a).toFixed(2)+", 100%, 50%)";c.css(b)}}}).directive("ajaxform",["$http",function(d){return{restrict:"E",replace:!0,template:'<form ng-submit="submit($event)" ng-transclude></form>',transclude:!0,link:function(c,a,b){c.submit=function(a){"POST"!=b.method&&"GET"!=b.method&&(a.preventDefault(),d({method:b.method,url:b.action}).then(function(a){},function(){}))}}}}]).directive("checkboxSequence",["$http",
function(d){return{restrict:"A",link:function(c,a,b){var d=null,f=null;a.on("click",'input[type="checkbox"]',function(b){var c=b.target.checked;if(b.shiftKey&&c===f&&d)for(var n=a.find('input[type="checkbox"]'),h=!1,k=0,p=n.length;k<p;k++){var g=n[k];if(g==d||g==b.target)if(!1===h)h=!0;else break;else h&&(g.checked=c,angular.element(g).triggerHandler("click"))}d=b.target;f=c})}}}]).directive("mapObject",function(){return{restrict:"A",template:'<table class="map">  <tr ng-repeat="(key, val) in mapObject">    <td ng-bind="key"></td><td ng-bind="val"></td>  </tr></table>',
replace:!0,scope:{mapObject:"="}}}).service("$flash",["$rootScope",function(d){return function(c,a){void 0===a&&(a=3E3);d.$broadcast("flash",c,a)}}]).directive("flash",["$timeout","$q",function(d,c){return{restrict:"E",template:'<div class="flash" ng-show="messages.length > 0"><span ng-repeat="message in messages track by $index" ng-bind="message"></span></div>',replace:!0,scope:{messages:"&"},link:function(a,b,e){a.messages=[];a.add=function(b){a.messages.push(b)};a.remove=function(b){b=a.messages.indexOf(b);
a.messages.splice(b,1)};a.$on("flash",function(b,e,l){a.add("...");b=function(b){a.remove("...");a.add(b);l&&d(function(){a.remove(b)},l)};c.when(e).then(b,b)})}}}]).factory("$laghttp",["$q","$http",function(d,c){return function(a){var b=d.defer();setTimeout(function(){c(a).then(b.resolve.bind(b),b.reject.bind(b))},250);return b.promise}}]).factory("$httpqueue",["$q","$http",function(d,c){var a=d.defer(),b=a.promise;a.resolve();return function(a){return b=b.then(function(){return c(a)})}}]);
